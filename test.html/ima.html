<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
<head>
	<title>Ads Test</title>
	<meta http-equiv="content-type" content="text/html; charset=UTF-8">
	<script type="text/javascript" src="flowplayer-3.2.6.js"></script>
	<script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" type="text/javascript"></script>
	<script type="text/javascript">
		var googletag = googletag || {};
		googletag.cmd = googletag.cmd || [];
		
		(function() {
			var gads = document.createElement('script');
			gads.async = true;
			gads.type = 'text/javascript';
			gads.src = 'http://www.googletagservices.com/tag/js/gpt.js';
			var node = document.getElementsByTagName('script')[0];
			node.parentNode.insertBefore(gads, node);
		})();
	</script>
</head>

<body>
	<div id="controls">
		<input type="button" id="play" value="Play" />
		<input type="button" id="pause" value="Pause" />
		<input type="button" id="stop" value="Stop" />
	</div>
	<div id="player" style="width: 800px; height: 400px; float: left;"></div>
	<div id="playerCompanion300250" style="width: 300px; height: 250px; float: left; margin-left: 100px; border: 1px solid #f00;"></div>
	<div id="playerCompanion5656" style="width: 56px; height: 56px; float: left; margin-left: 100px; border: 1px solid #f00;"></div>
	<div id="playerCompanion500500" style="width: 56px; height: 56px; float: left; margin-left: 100px; border: 1px solid #f00;"></div>
</body>

<script type="text/javascript">
	//see: http://code.google.com/apis/ima/docs/sdks/googleflashas3_companions.html#example2
	//and: http://www.google.com/support/dfp_premium/bin/answer.py?hl=en&answer=1191131
	googletag.cmd.push(function() {
		console.debug('setting up companion slots');
		var adSlot = googletag.defineSlot('ccr.ihr/ihr4', [300, 250], 'playerCompanion300250');
		adSlot.addService(googletag.companionAds());
		
		adSlot = googletag.defineSlot('ccr.ihr/ihr4', [56, 56], 'playerCompanion5656');
		adSlot.addService(googletag.companionAds());
		
		adSlot = googletag.defineSlot('ccr.ihr/ihr4', [500, 500], 'playerCompanion500500');
		adSlot.addService(googletag.companionAds());
		
		googletag.enableServices();
	});
	
	f = flowplayer('player', '../flowplayer/build/flowplayer.commercial.swf', {
		debug: true,
		log: {level: 'debug', filter: 'com.iheart.ima.*'},
		
		plugins: {
		},
		
		onLoad: function() {
			// f.getPlugin('ima').playAd('http://localhost/IHR/flowplayer/test.html/vast.ccempty.xml');
			
			//f.getPlugin('ima').playAd('http://qa0a-api.iheart.com/sca/vast-sample.xml');
			// f.getPlugin('ima').playAd('http://pubads.g.doubleclick.net/gampad/ads?sz=640x480&iu=%2F7282&ciu_szs=300x250&impl=s&gdfp_req=1&env=vp&output=xml_vast2&unviewed_position_start=1&m_ast=vast&url=%5breferrer_url%5d&correlator=%5btimestamp%5d');
			
			// f.getPlugin('ima').playAd('http://pubads.g.doubleclick.net/gampad/ads?sz=640x480&iu=%2F7282%2Fiheart.web%2Fcus%2Fnational%2Fcustom&ciu_szs=1x1%2C300x250%2C300x600&cust_params=seed%3D89556%26genre%3Dcustom%26grp%3Dcc%26sect%3Dnull%26pg%3Dnull%26pp%3D8000%26g%3Dmale%26a%3D28%26rzip%3D10012%26at%3DIHR_FACEBOOK%26id%3D126252%26ts%3D1333646731211%26source%3Dnull&impl=s&gdfp_req=1&env=vp&output=xml_vast2&unviewed_position_start=1&url=referrer_url&correlator=1333646731211');
			
			// f.getPlugin('ima').playAd('http://ad.doubleclick.net/pfadx/ccr.test;ccrcontent1=null;ccrcontent2=live;ccrcontent3=null;ccrlocalcontent=null;ccrpos=7005;sourceaffiliate=null;ccrformat=ACMAINSTREAM;ccrmarket=NEWYORK-NY;group=cc;sz=1000x27;u=ccrcontent1*null!ccrcontent2*live!ccrcontent3*null!ccrlocalcontent*null!ccrpos*7005!sourceaffiliate*null!ccrformat*ACMAINSTREAM!ccrmarket*NEWYORK-NY!group*cc!sz*1000x27;ord=1334675724927');
			
			// f.getPlugin('ima').playAd('http://qa0a-api.iheart.com/vast/vast.xml');
			
			// f.getPlugin('ima').playAd('http://pubads.g.doubleclick.net/gampad/ads?sz=2x2&iu=%2F7282%2Fiheart.web%2Fcus%2Fnational%2Fcustom&ciu_szs=10x10%2C300x250%2C300x600%2C970x90&cust_params=seed%3D39335%26genre%3Dcustom%26grp%3Dcc%26ccrcontent1%3Dnull%26ccrcontent2%3Dnull%26ccrcontent3%3Dnull%26pp%3D8001%26g%3Dmale%26a%3D28%26rzip%3D10012%26at%3DIHR_FACEBOOK%26id%3D126252%26ts%3D1336591136415%26source%3Dnull&impl=s&gdfp_req=1&env=vp&output=xml_vast2&unviewed_position_start=1&url=referrer_url&correlator=1336591136415');
			
			
			// f.getPlugin('ima').playAd('http://pubads.g.doubleclick.net/gampad/ads?sz=2x2&iu=%2F7282%2Fiheart.web%2Fcus%2Fnational%2Fcustom&ciu_szs=10x10%2C300x250%2C300x600%2C970x90&cust_params=seed%3D34743%26genre%3Dcustom%26grp%3Dcc%26ccrcontent1%3Dnull%26ccrcontent2%3Dnull%26ccrcontent3%3Dnull%26pp%3D8001%26g%3Dmale%26a%3D28%26rzip%3D10012%26at%3DIHR_FACEBOOK%26id%3D126252%26ts%3D1336591136415%26source%3Dnull&impl=s&gdfp_req=1&env=vp&output=xml_vast2&unviewed_position_start=1&url=referrer_url&correlator=1336591136415');
			
			f.play({
				provider: 'ima',
				url: 'http://localhost/IHR/flowplayer/test.html/vast.mixin.xml',
				customProperties: {
					test: 'hi'
				}
			});
			
			// setTimeout(function() {
			// 	f.play();
			// }, 100);
		}
	});
	
	
	$(function() {
		$("#play").click(function() {
			f.play();
		});
		
		$("#pause").click(function() {
			f.pause();
		});
		
		$("#stop").click(function() {
			f.stop();
		});
	});
</script>

</html>